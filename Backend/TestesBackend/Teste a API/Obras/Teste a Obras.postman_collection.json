{
	"info": {
		"_postman_id": "2fef7a0f-bb0a-47cc-b99a-424d14608381",
		"name": "Teste a Obras",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Teste de pedido de listagem de Obras",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "2885ab4f-3e5a-4597-8dd7-b653b02b3f3e",
						"exec": [
							"pm.test(\"Teste à Ligação com o Servidor\", function () {",
							"    //Se o estado for 200",
							"    if(pm.response.to.have.status(200)){",
							"         pm.test(\"Resposta de /obra\", function () {",
							"            var jsonData = pm.response.json();",
							"            pm.expect(jsonData).to.eql([{\"idObra\":1,\"designacao\":\"Conjunto: Mesa e Cadeiras\",\"LCRM\":\"0005-04-2006-MOB\",\"CEARC\":\"1221/21/06\",\"dataAberturaLCRM\":\"2006-04-27T23:00:00.000Z\",\"dataAberturaCEARC\":\"2006-04-27T23:00:00.000Z\",\"dataEntradaLCRM\":\"2006-04-27T23:00:00.000Z\",\"dataEntradaCEARC\":\"2006-04-27T23:00:00.000Z\"},{\"idObra\":2,\"designacao\":\"Coluna neoclássica com policromia\",\"LCRM\":\"0015-05-2007-MOB\",\"CEARC\":\"1222/22/07\",\"dataAberturaLCRM\":\"2006-04-28T23:00:00.000Z\",\"dataAberturaCEARC\":\"2006-04-28T23:00:00.000Z\",\"dataEntradaLCRM\":\"2006-04-28T23:00:00.000Z\",\"dataEntradaCEARC\":\"2006-04-28T23:00:00.000Z\"},{\"idObra\":3,\"designacao\":\"Piano de brincar em madeira\",\"LCRM\":\"0025-05-2007-MOB\",\"CEARC\":\"1223/23/08\",\"dataAberturaLCRM\":\"2006-04-29T23:00:00.000Z\",\"dataAberturaCEARC\":\"2006-04-29T23:00:00.000Z\",\"dataEntradaLCRM\":\"2006-04-29T23:00:00.000Z\",\"dataEntradaCEARC\":\"2006-04-29T23:00:00.000Z\"}]);",
							"         });",
							"    }",
							"    //Se o estado for 500",
							"    else if(pm.response.to.have.status(500)){",
							"        pm.response.to.have.body(\"Erro na query\");",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "brandi.ipt.pt:80/api/obras",
					"host": [
						"brandi",
						"ipt",
						"pt"
					],
					"port": "80",
					"path": [
						"api",
						"obras"
					]
				}
			},
			"response": []
		},
		{
			"name": "Teste de pedido de um processo de obra com ID inválido",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c65577d5-ce20-4f9e-9613-130d02dceaa1",
						"exec": [
							"pm.test(\"Ligação Não Encontrada\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test(\"Mensagem de Erro encontrada\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.eql({",
							"        \"erro\": \"ProcessoObra not found\"",
							"    });",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "brandi.ipt.pt:80/api/processosObra/id/-1",
					"host": [
						"brandi",
						"ipt",
						"pt"
					],
					"port": "80",
					"path": [
						"api",
						"processosObra",
						"id",
						"-1"
					]
				}
			},
			"response": []
		}
	]
}